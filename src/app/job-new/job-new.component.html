<div class="container" style="margin-top: 20px;">
  <br>
  <h2 align="center">Job anlegen</h2>
  <form (ngSubmit)="onSubmit()" #f="ngForm">
    <!--Processing tool-->
    <div class="form-group">
      <label class="my-1 mr-2" for="tool">Werkzeug</label>
      <select
        class="form-control"
        id="formCustomSelectPref"
        style="max-width: 300px;"
        ngModel
        name="tool"
        required
      >
        <option selected></option>
        <option
          *ngFor="let process of processMappings"
          [value]="process.processId"
          >{{ process.name }}</option
        >
      </select>
    </div>

    <!-- Job name -->
    <div class="form-group">
      <label for="inputName">Jobname</label>
      <input
        style="max-width: 300px;"
        class="form-control"
        id="jobName"
        placeholder=""
        ngModel
        name="jobName"
        required
      />
    </div>

    <!-- Coordinates -->
    <div class="form-group">
      <label for="observationExtent">Koordinaten des Observationsgebiets</label>
      <input
        style="max-width: 300px;"
        class="form-control"
        id="inputName"
        placeholder=""
        ngModel
        name="coordinates"
        ngModel
        required
      />
      <small id="Help" class="form-text text-muted"
        >Eingabereihenfolge: min Longitude, min Latitude, max Longitude, max
        Latitude, z.B. 7.1179, 51.2407, 7.2527, 51.2884
      </small>
    </div>

    <!-- Job description-->
    <div class="form-group">
      <label for="inputDescription">Jobbeschreibung</label>
      <textarea
        style="max-width: 300px;"
        class="form-control"
        id="inputDescription"
        rows="3"
        ngModel
        name="jobDescription"
      ></textarea>
    </div>

    <!-- Map -->
    <!-- <div class="form-group">
        <label for="leafletmap"
        > ... selektiere das Observationsgebiet</label>
        <app-leaflet-map></app-leaflet-map>
      </div> -->

    <!--Ausführungsintervall (as cronjob)-->
    <div class="form-group">
      <label for="pattern">Ausführungsintervall als Cronjob</label>
      <input
        style="max-width: 300px;"
        class="form-control"
        id="inputName"
        placeholder=""
        ngModel
        name="cronJob_pattern"
      />
      <small id="Help" class="form-text text-muted">
        Wie du einen Cronjob angibst findest du hier:
        <a href="https://crontab.guru/">https://crontab.guru/</a>
        . Zum Beispiel 5 0 * 8 * (um 00:05 Uhr im August)
      </small>
    </div>
    <br />
    <br />

    <p>Definiere die Eingabedaten</p>
    <div *ngFor="let process of processMappings">

      <div
        *ngIf="process.processId == 'de.hsbo.wacodis.snap.ndvi'" >
         <!--TODO *ngIf="process.processId == 'selected process in the tool formcontrol'"" -->
        <div *ngFor="let input of process.inputs; let i = index">
          <ngb-accordion
            [closeOthers]="true"
            #acc="ngbAccordion"
            activeIds="ngb-panel-0"
          >
            <ngb-panel title="{{ input.inputType }}">
              <ng-template ngbPanelContent>
                <app-static-subset
                  *ngIf="
                    input.inputType == 'StaticSubsetDefinition';
                    else copernicus
                  "
                ></app-static-subset>
              </ng-template>
              <ng-template #copernicus>
                <app-copernicus-subset></app-copernicus-subset>
              </ng-template>
            </ngb-panel>
          </ngb-accordion>
        </div>
      </div>
    </div>
    <br />
    <br />
    <!--Submit button-->
    <button
      type="button submit"
      class="btn btn-primary"
      style="margin: 5px;"
      (click)="onSubmitJob()"
      style="border-color: black; color: black; background-color: #e3ecf6;"
    >
      <!--(click) = onSubmit(job)-->
      Abschicken
    </button>
  </form>
</div>
<br>

<!--Render Inputtypefields-->
<!--     <div *ngFor="let process of processMappings">
      <div
        *ngIf="process.processId == 'de.hsbo.wacodis.land_cover_classification'"
      >
        <div *ngFor="let input of process.inputs; let i = index">
          <br />
          <br />

          <app-static-subset
            *ngIf="input.inputType == 'StaticSubsetDefinition'; else copernicus"
          ></app-static-subset>
          <ng-template #copernicus>
            <app-copernicus-subset></app-copernicus-subset>
          </ng-template>
        </div>
      </div>
    </div> -->
