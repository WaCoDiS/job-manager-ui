<div class="container" style="margin-top: 20px;">
  <br />
  <h2 align="center">Job anlegen</h2>
  <form (ngSubmit)="onSubmitJob()" #f="ngForm">
    <!-- Job name -->
    <div class="form-group">
      <label for="inputName">Jobname</label>
      <input
        style="max-width: 300px;"
        class="form-control"
        id="jobName"
        placeholder=""
        ngModel
        name="jobName"
        required
        #jobName="ngModel"
      />
      <!--       <span class="help-block" style="color: red; font-size: small;" *ngIf="!jobName.valid && jobName.touched"
        >Bitte gib einen Jobnamen an</span
      > -->
    </div>

    <!-- Coordinates -->
    <fieldset ngModelGroup="areaOfInterest">
      <div class="form-group">
        <label for="observationExtent"
          >Koordinaten des Observationsgebiets</label
        >
        <input
          style="max-width: 300px;"
          class="form-control"
          id="inputName"
          placeholder=""
          ngModel
          name="extent"
          ngModel
          required
        />
        <small id="Help" class="form-text text-muted"
          >Eingabereihenfolge: min Longitude, min Latitude, max Longitude, max
          Latitude, z.B. 7.1179, 51.2407, 7.2527, 51.2884
        </small>
      </div>
    </fieldset>
    <!--Processing tool-->
    <div class="form-group">
      <label class="my-1 mr-2" for="tool">Werkzeug</label>
      <select
        class="form-control"
        id="formCustomSelectPref"
        style="max-width: 300px;"
        [(ngModel)]="selectedProcessingTool"
        name="processingTool"
        required
      >
        <option selected></option>
        <option
          *ngFor="let process of processMappings"
          [value]="process.processId"
          >{{ process.name }}</option
        >
      </select>
    </div>

    <!--Show selected processing tool-->
    <!-- <p>{{selectedProcessingTool}}</p> -->

    <div class="form-group">
      <div *ngFor="let process of processMappings">
        <div *ngIf="process.processId === selectedProcessingTool">
          <p style="color: gray;">Definiere die Eingabedaten</p>
          <div *ngFor="let input of process.inputs; let i = index">
            <ngb-accordion
              [closeOthers]="true"
              #acc="ngbAccordion"
              activeIds="ngb-panel-0"
            >
              <ngb-panel title="{{ input.inputType }}">
                <ng-template ngbPanelContent>
                  <app-static-subset [index]="i"
                    *ngIf="
                      input.inputType == 'StaticSubsetDefinition';
                      else copernicus
                    "
                  ></app-static-subset>
                </ng-template>
                <ng-template #copernicus>
                  <app-copernicus-subset [index]="i"></app-copernicus-subset>
                </ng-template>
              </ngb-panel>
            </ngb-accordion>
          </div>
        </div>
      </div>
    </div>

    <br />

    <!-- Job description-->
    <div class="form-group">
      <label for="jobDescription">Jobbeschreibung</label>
      <textarea
        style="max-width: 300px;"
        class="form-control"
        id="jobDescription"
        rows="3"
        ngModel
        name="jobDescription"
      ></textarea>
    </div>

    <!-- Map -->
    <!-- <div class="form-group">
        <label for="leafletmap"
        > ... selektiere das Observationsgebiet</label>
        <app-leaflet-map></app-leaflet-map>
      </div> -->

    <!--Ausführungsintervall (as cronjob)-->
    <fieldset ngModelGroup="execution">
      <div class="form-group">
        <label for="pattern">Ausführungsintervall als Cronjob</label>
        <input
          style="max-width: 300px;"
          class="form-control"
          id="pattern"
          placeholder=""
          ngModel
          name="pattern"
        />
        <small id="Help" class="form-text text-muted">
          Wie du einen Cronjob angibst findest du hier:
          <a href="https://crontab.guru/">https://crontab.guru/</a>
          . Zum Beispiel 5 0 * 8 * (um 00:05 Uhr im August)
        </small>
      </div>
    </fieldset>
    <br />
    <br />

    <!--Submit button-->
    <button
      type="button submit"
      class="btn btn-primary"
      style="margin: 5px;"
      (click)="onSubmitJob()"
      style="border-color: #e3ecf6; color: #e3ecf6; background-color: #4d80bd;"
    >
      <!--(click) = onSubmit(job)-->
      Abschicken
    </button>
  </form>
</div>
<br />

<!--Show form object as json -->
<pre>{{ f.value | json }}</pre>
